{"version":3,"sources":["../../../../assets/Script/assets/Script/Game.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEA8JC;QA5JG,YAAY;QACK,yBAAmB,GAAW,GAAG,CAAC;QAClC,qBAAe,GAAW,CAAC,CAAC;QAC5B,qBAAe,GAAW,GAAG,CAAC;QAC9B,kBAAY,GAAW,CAAC,CAAC;QAE1C,4BAA4B;QACpB,iBAAW,GAAW,CAAC,CAAC;QACxB,eAAS,GAAW,CAAC,CAAC;QACtB,eAAS,GAAmB,IAAI,CAAC;QACjC,qBAAe,GAAmB,IAAI,CAAC;QACvC,UAAI,GAAW,CAAC,CAAC;QACjB,aAAO,GAAW,CAAC,EAAE,CAAC;QACtB,SAAG,GAAY,IAAI,CAAC;QAG5B,gBAAU,GAAa,IAAI,CAAC;QAG5B,eAAS,GAAa,IAAI,CAAC;QAG3B,eAAS,GAAa,IAAI,CAAC;QAG3B,UAAI,GAAc,IAAI,CAAA;QAGtB,YAAM,GAAY,IAAI,CAAA;QAGtB,iBAAW,GAAc,IAAI,CAAA;QAG7B,cAAQ,GAAc,IAAI,CAAA;QAG1B,gBAAU,GAAc,IAAI,CAAA;;IAuHhC,CAAC;IArHG,qBAAM,GAAN;QACI,IAAI,CAAC,GAAG,GAAI,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,IAAI,cAAc,GAAG,EAAE,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC;QACrD,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC;QAC9B,cAAc,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAGhD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QACnD,oCAAoC;QACpC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;QAEtD,+DAA+D;QAC/D,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,eAAe,EAAE,CAAC;IAC3B,CAAC;IAED,oBAAK,GAAL;QACI,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,IAAI,CAAC,IAAI,IAAG,EAAE,CAAC;QACf,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjE,CAAC;IAED,gCAAiB,GAAjB;QACI,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;QACjD,iBAAiB;QACjB,OAAO,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACrC,OAAO,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACjD,CAAC;IAED,iCAAkB,GAAlB;QACI,OAAO,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,8BAAe,GAAf;QACI,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;IACxD,CAAC;IAED,sBAAO,GAAP;QACI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY,CAAC;QACtC,+BAA+B;QAC/B,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;IACxD,CAAC;IAED,wBAAS,GAAT,UAAU,UAAkB;QACxB,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACjE,CAAC;IAED,oDAAoD;IACpD,wBAAS,GAAT;QACI,IAAM,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAE9C,wCAAwC;QACxC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;IAC7C,CAAC;IAED,6BAAc,GAAd;QACI,IAAM,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAClD,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAExE,wCAAwC;QACxC,IAAM,WAAW,GAAG,QAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;QACvD,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;QAExB,IAAM,IAAI,GAAG,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACjD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7B,WAAW,CAAC,cAAc,EAAE,CAAC;QAC7B,IAAI,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;YACtB,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;IACL,CAAC;IAED,4BAAa,GAAb;QACI,IAAM,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACnC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC;QACd,WAAW,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAE7B,IAAM,IAAI,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAA;QACnD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC,GAAG,CAAC,CAAA;QACjE,wCAAwC;QACxC,WAAW,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;IACrD,CAAC;IAED,wBAAS,GAAT;QACI,IAAM,UAAU,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QACnD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAC/B,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACjD,IAAM,IAAI,GAAG,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAA;QAClD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;QACnC,wCAAwC;QACxC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;IAChD,CAAC;IAED,mCAAmC;IACnC,+BAAgB,GAAhB;QACI,EAAE,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;IAC3F,CAAC;IAED,mCAAoB,GAApB;QACI,EAAE,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;IACnG,CAAC;IAED,8BAAe,GAAf;QACI,EAAE,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;IAC3F,CAAC;IA3ID;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;4CACS;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACQ;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACQ;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;sCACE;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACI;IAGtB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACM;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACQ;IAtCX,IAAI;QADxB,OAAO;OACa,IAAI,CA6JxB;IAAD,WAAC;CA7JD,AA6JC,CA7JiC,EAAE,CAAC,SAAS,GA6J7C;kBA7JoB,IAAI","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n    // CONSTANTS\n    private readonly ASTEROID_SPAWN_RATE: number = 1.9;\n    private readonly COIN_SPAWN_RATE: number = 4;\n    private readonly AMMO_SPAWN_RATE: number = 2.5;\n    private readonly AMMO_PER_BOX: number = 4;\n\n    // NORMAL INSTANCE VARIABLES\n    private currentAmmo: number = 2;\n    private coinScore: number = 0;\n    private coinSound: cc.AudioSource = null;\n    private ammoPickupSound: cc.AudioSource = null;\n    private time: number = 0;\n    private gravity: number = -70;\n    private cvs: cc.Node = null;\n\n    @property(cc.Label)\n    scoreLabel: cc.Label = null;\n\n    @property(cc.Label)\n    timeLabel: cc.Label = null;\n\n    @property(cc.Label)\n    ammoLabel: cc.Label = null;\n\n    @property(cc.Prefab)\n    coin: cc.Prefab = null\n\n    @property(cc.Node)\n    player: cc.Node = null\n\n    @property(cc.Prefab)\n    playerLaser: cc.Prefab = null\n\n    @property(cc.Prefab)\n    asteroid: cc.Prefab = null\n\n    @property(cc.Prefab)\n    playerAmmo: cc.Prefab = null\n\n    onLoad () {\n        this.cvs =  cc.find(\"Canvas\");\n        let physicsManager = cc.director.getPhysicsManager();\n        physicsManager.enabled = true;\n        physicsManager.gravity = cc.v2(0, this.gravity);\n\n\n        this.coinSound = this.getComponent(cc.AudioSource);\n        // Push reference of the game object\n        this.player.getComponent('PlayerControl').game = this;\n\n        // Setup auto-generation of objects dynamically during gameplay\n        this.setCoinScheduler();\n        this.setAsteroidScheduler();\n        this.setAmmocheduler();\n    }\n\n    start () {\n        this.spawnAmmo();\n        this.spawnAsteroid();\n        this.spawnCoin();\n    }\n\n    update (dt) {\n        this.time+= dt;\n        this.timeLabel.string = \"Time: \" + this.parseTime(this.time);\n    }\n\n    generateRandomPos() {\n        let randomX = Math.random() * this.cvs.width / 2;\n        // set sign value\n        randomX *= this.generateRandomSign();\n        return new cc.Vec2(randomX, this.cvs.height);\n    }\n\n    generateRandomSign() {\n        return Math.random() <= 0.5 ? -1 : 1;\n    }\n\n    updateCoinScore() {\n        this.coinScore++;\n        this.coinSound.play();\n        this.scoreLabel.string = \"Coins: \" + this.coinScore;\n    }\n\n    addAmmo() {\n        this.currentAmmo += this.AMMO_PER_BOX;\n        // this.ammoPickupSound.play();\n        this.ammoLabel.string = \"Ammo: \" + this.currentAmmo;\n    }\n\n    parseTime(toBeParsed: number) {\n        return Number(Math.round(toBeParsed * 100) / 100).toFixed(2);\n    }\n\n    // ========== DYNAMICALLY OBJECT CREATORS ==========\n    spawnCoin() {\n        const newCoin = cc.instantiate(this.coin);\n        this.node.addChild(newCoin);\n        newCoin.setPosition(this.generateRandomPos());\n\n        // Leave a reference to the game object.\n        newCoin.getComponent('Coin').game = this;\n    }\n\n    spawnBlueLaser() {\n        const newLaser = cc.instantiate(this.playerLaser);\n        newLaser.setPosition(this.player.x, this.player.y - this.player.height);\n\n        // Leave a reference to the game object.\n        const laserObject = newLaser.getComponent('LaserBlue');\n        laserObject.game = this;\n\n        const body = newLaser.getComponent(cc.RigidBody);\n        body.linearVelocity = cc.v2(0, 350);\n        this.node.addChild(newLaser);\n        laserObject.playLaserSound();\n        if (this.currentAmmo > 0) {\n            this.currentAmmo--;\n        }\n    }\n\n    spawnAsteroid() {\n        const newAsteroid = cc.instantiate(this.asteroid);\n        this.node.addChild(newAsteroid);\n        let pos = this.generateRandomPos();\n        pos.x *= 0.77;\n        newAsteroid.setPosition(pos);\n\n        const body = newAsteroid.getComponent(cc.RigidBody)\n        body.linearVelocity = cc.v2(20 * this.generateRandomSign(), -220)\n        // Leave a reference to the game object.\n        newAsteroid.getComponent('Asteroid').game = this;\n    }\n\n    spawnAmmo() {\n        const newAmmoBox = cc.instantiate(this.playerAmmo);\n        this.node.addChild(newAmmoBox);\n        newAmmoBox.setPosition(this.generateRandomPos());\n        const body = newAmmoBox.getComponent(cc.RigidBody)\n        body.linearVelocity = cc.v2(0, -95)\n        // Leave a reference to the game object.\n        newAmmoBox.getComponent('Ammo').game = this;\n    }\n\n    // ========== SCHEDULERS ==========\n    setCoinScheduler() {\n        cc.director.getScheduler().schedule(this.spawnCoin, this, this.COIN_SPAWN_RATE, false);\n    }\n\n    setAsteroidScheduler() {\n        cc.director.getScheduler().schedule(this.spawnAsteroid, this, this.ASTEROID_SPAWN_RATE, false);\n    }\n\n    setAmmocheduler() {\n        cc.director.getScheduler().schedule(this.spawnAmmo, this, this.AMMO_SPAWN_RATE, false);\n    }\n}\n"]}