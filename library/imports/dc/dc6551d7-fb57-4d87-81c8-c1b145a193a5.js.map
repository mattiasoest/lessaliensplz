{"version":3,"sources":["../../../../assets/Script/assets/Script/EnemySmall.ts"],"names":[],"mappings":";;;;;AAAA,iCAA4B;AAEtB,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAwC,8BAAK;IAD7C;QAAA,qEAiDC;QA9CoB,eAAS,GAAG,GAAG,CAAC;QAChB,kBAAY,GAAG,CAAC,CAAC;QACjB,oBAAc,GAAG,IAAI,CAAC;QACtB,oBAAc,GAAG,GAAG,CAAC;QACrB,aAAO,GAAG,CAAC,EAAE,CAAC;QACd,iBAAW,GAAW,GAAG,CAAC;QAEnC,gBAAU,GAAmB,IAAI,CAAC;QAClC,eAAS,GAAa,KAAK,CAAC;QAC5B,gBAAU,GAAW,CAAC,CAAC;QACvB,0BAAoB,GAAG,CAAC,CAAC;;IAoCrC,CAAC;IAlCG,0BAAK,GAAL;QACI,iBAAM,UAAU,WAAE,CAAC;QACnB,iBAAM,iBAAiB,YAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC5D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QACpD,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,2BAAM,GAAN,UAAQ,EAAE;QACN,iBAAM,MAAM,YAAC,EAAE,CAAC,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,iBAAM,QAAQ,WAAE,CAAC;QACtC,iBAAM,UAAU,YAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAExD,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC;gBACtB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,YAAY,EAAE;oBACzF,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;oBAEpB,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,EACjC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAI,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,EACtE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBAE9E,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;oBACvB,IAAI,CAAC,oBAAoB,EAAE,CAAC;iBAC/B;aACJ;SACJ;IACL,CAAC;IAED,kCAAa,GAAb;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;IAClC,CAAC;IA/CgB,UAAU;QAD9B,OAAO;OACa,UAAU,CAgD9B;IAAD,iBAAC;CAhDD,AAgDC,CAhDuC,eAAK,GAgD5C;kBAhDoB,UAAU","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import Enemy from \"./Enemy\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class EnemySmall extends Enemy {\n\n    private readonly FIRE_RATE = 1.8;\n    private readonly BULLET_BURST = 5;\n    private readonly LASER_INTERVAL = 0.04;\n    private readonly X_ACCELERATION = 850;\n    private readonly Y_SPEED = -70; \n    private readonly LASER_SPEED: number = 270;\n\n    private laserSound: cc.AudioSource = null;\n    private isBurstOn: boolean =  false;\n    private burstTimer: number = 0;\n    private numberOfBulletsFired = 0;\n\n    start () {\n        super.initialize();\n        super.setLaserScheduler(this.FIRE_RATE, this.initiateLaser);\n        this.laserSound = this.getComponent(cc.AudioSource);\n        this.hitPoints = 0;\n    }\n\n    update (dt) {\n        super.update(dt);\n        this.node.rotation = super.getAngle();\n        super.updateShip(this.X_ACCELERATION, this.Y_SPEED, dt);\n\n        if (this.isAllowedToFire) {\n            if (this.isBurstOn) {\n                this.burstTimer += dt;\n                if (this.burstTimer >= this.LASER_INTERVAL && this.numberOfBulletsFired < this.BULLET_BURST) {\n                    this.burstTimer = 0;\n\n                    this.game.spawnEnemyLaser(0, this.node,\n                         cc.v2(Math.sin(this.node.rotation /  (-180 / Math.PI)) * this.LASER_SPEED,\n                            Math.cos(this.node.rotation / (-180 / Math.PI)) * -this.LASER_SPEED));\n\n                    this.laserSound.play();\n                    this.numberOfBulletsFired++;\n                }\n            }\n        }\n    }\n\n    initiateLaser() {\n        this.isBurstOn = true;\n        this.burstTimer = 0;\n        this.numberOfBulletsFired = 0;\n    }\n}\n"]}