{"version":3,"sources":["../../../../assets/Script/assets/Script/Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import InvincibleEffect from \"./InvincibleEffect\";\nimport Player from \"./Player\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n    @property(cc.Node)\n    menu: cc.Node = null;\n\n    @property(cc.Label)\n    scoreLabel: cc.Label = null;\n\n    @property(cc.Label)\n    timeLabel: cc.Label = null;\n\n    @property(cc.Label)\n    ammoLabel: cc.Label = null;\n\n    @property(cc.Label)\n    newHighScoreLabel: cc.Label = null;\n\n    @property(cc.Label)\n    counterLabel: cc.Label = null;\n\n    @property(cc.Prefab)\n    coin: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    playerFab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    playerLaser: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    redLaser: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    asteroid: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    bigEnemy: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    medEnemy: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    smallEnemy: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    playerAmmo: cc.Prefab = null;\n\n    @property(cc.AudioClip)\n    noAmmoSound: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    ammoPickupSound: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    rockExpSound: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    highScoreSound: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    menuMusic: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    gameplayMusic: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    upperBoundSound: cc.AudioClip = null;\n\n    @property(cc.Node)\n    upperBound: cc.Node = null;\n\n    @property(cc.Node)\n    lowerBound: cc.Node = null;\n\n    // CONSTANTS\n    private readonly BEST_TIME_KEY = \"best_time\";\n    private readonly ASTEROID_SPAWN_RATE: number = 1.2;\n    private readonly COIN_SPAWN_RATE: number = 1.45;\n    private readonly AMMO_SPAWN_RATE: number = 7.1;\n    private readonly AMMO_PER_BOX: number = 12;\n    private readonly ENEMY_SPAWN_RATE: number = 8;\n    private readonly INVINCIBLE_DURATION: number = 5;\n    private readonly MOBILE_ACC_MULTIPLIER = 2.7;\n    private readonly ACCELEROMETER_TILT_OFFSET: number = 0.32;\n    public readonly GAME_STATE = { PLAY : 0, MENU : 1 }\n\n    currentState = this.GAME_STATE.MENU;\n\n    // NORMAL INSTANCE VARIABLES\n    private currentAmmo: number = this.AMMO_PER_BOX;\n    private coinScore: number = 0;\n    private coinSound: cc.AudioSource = null;\n    private time: number = 0;\n    private gravity: number = -70;\n    private cvs: cc.Node = null;\n    private scheduler: cc.Scheduler = null;\n    private invincibleParticleObject: InvincibleEffect = null;\n    private isAlive = true;\n    private isUpperBoundHit = false;\n    private isLowerBoundHit = false;\n    private increaseOpacity = true;\n    private isUpperBoundAnimationPlaying: boolean = false;\n    private isLowerBoundAnimationPlaying: boolean = false;\n    private invincibleTimer: number = this.INVINCIBLE_DURATION;\n    private boundId = -1;\n    private justPlayedUpperBoundSound: boolean = false;\n    private justPlayedLowerBoundSound: boolean = false;\n    private playerObject: Player = null;\n    private isMobile: boolean = false;\n    private menuMusicId: number = -1;\n    private gameMusicId: number = -1;\n    private camera: cc.Camera = null;\n    private bestTime: number = 0;\n\n    // Variables for player acceleration movement\n    // Gets set depending on input from the user\n    private accLeft: boolean = false;\n    private accRight: boolean = false;\n    private accUp: boolean = false;\n    private accDown: boolean = false;\n    private xAccelerometer: number = 0;\n    private yAccelerometer: number = 0;\n\n    player: cc.Node = null;\n\n    onLoad () {\n        this.setisMobileDevice();\n        this.cvs = cc.find(\"Canvas\");\n        // Setup physics engine.\n        let physicsManager = cc.director.getPhysicsManager();\n        physicsManager.enabled = true;\n        physicsManager.gravity = cc.v2(0, this.gravity);\n\n        this.enableStatsLabels(false);\n        this.newHighScoreLabel.node.opacity = 0;\n        this.coinSound = this.getComponent(cc.AudioSource);\n        this.coinSound.volume = 0.45;\n        this.scheduler = cc.director.getScheduler();\n        this.menu.active = true;\n        this.upperBound.active = false;\n        this.lowerBound.active = false;\n        this.resetInvincibleCounter();\n        this.startBgMusic();\n        this.checkLocalHighScore();\n\n        // =========== ADD MORE CONTROLS IF WE ARE RUNNING ON A MOBILE ===========\n        if (this.isMobileDevice()) {\n            cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION, this.onDeviceMotionEvent, this);\n            cc.systemEvent.setAccelerometerEnabled(true);\n            this.node.on(cc.Node.EventType.TOUCH_START, () => this.spawnBlueLaser());\n        }\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    startBgMusic() {\n        this.menuMusicId = cc.audioEngine.playMusic(this.menuMusic, true);\n        cc.audioEngine.setMusicVolume(0.4);\n    }\n\n    update (dt) {\n        switch (this.currentState) {\n            case this.GAME_STATE.PLAY:\n                this.checkTopBoundAnimation(dt);\n                this.checkLowBoundAnimation(dt);\n                this.time += dt;\n                this.timeLabel.string = \"Time: \" + this.parseTime(this.time, 2);\n                if (this.playerObject.isInvincible()) {\n                    this.invincibleTimer -= dt;\n                    this.counterLabel.string = this.parseTime(this.invincibleTimer, 0);\n                    if (this.invincibleTimer < 0) {\n                        this.playerObject.makeNotInvincible();\n                        this.resetInvincibleCounter();\n                    }\n                }\n                break;\n            case this.GAME_STATE.MENU:\n                break;\n        }\n    }\n\n    getMainCanvas() {\n        return this.cvs;\n    }\n\n    getPlayerObject() {\n        return this.playerObject;\n    }\n    getInvincibleDuration() {\n        return this.INVINCIBLE_DURATION;\n    }\n\n    getPlayerUpperBound() {\n        return -this.cvs.height * 0.18;\n    }\n\n    isPlayerAlive() {\n        return this.isAlive;\n    }\n\n    isMobileDevice() {\n        return this.isMobile;\n    }\n\n    setisMobileDevice() {\n        this.isMobile = cc.sys.isMobile;\n    }\n\n    getAccelerometerX() {\n        return this.xAccelerometer\n    }\n\n    getAccelerometerY() {\n        return this.yAccelerometer\n    }\n\n    isAccUp() {\n        return this.accUp\n    }\n\n    isAccDown() {\n        return this.accDown;\n    }\n\n    isAccLeft() {\n        return this.accLeft\n    }\n\n    isAccRight() {\n        return this.accRight;\n    }\n\n    startGame() {\n        this.setMenuInteractable(false);\n        this.menu.active = false\n        this.createPlayer();\n        this.setupItemAutoGeneration();\n\n        this.enableStatsLabels(true);\n        this.scoreLabel.string = \"Coins: \" + this.coinScore;\n        this.ammoLabel.string = \"Ammo: \" + this.currentAmmo;\n\n        this.setGameState(this.GAME_STATE.PLAY);\n        this.upperBound.y = this.upperBound.height / 2 + this.getPlayerUpperBound() + this.player.height / 2;\n        this.upperBound.active = true;\n        this.upperBound.opacity = 0;\n        this.lowerBound.active = true;\n        this.lowerBound.opacity = 0;\n    }\n\n    setMenuInteractable(value: boolean) {\n        let buttons = this.menu.getComponentsInChildren(cc.Button);\n        buttons.forEach(button => {\n            button.interactable = value;\n        });\n    }\n\n    setGameState(state: number) {\n        switch (state) {\n            case this.GAME_STATE.MENU:\n                this.menuMusicId = cc.audioEngine.playMusic(this.menuMusic, true);\n                this.currentState = state;\n                break;\n            case this.GAME_STATE.PLAY:\n                this.gameMusicId = cc.audioEngine.playMusic(this.gameplayMusic, true);\n                this.currentState = state;\n                break;\n            default: \n                throw new Error(\"Invalid game state: \" + state);\n        }\n    }\n\n    resetGame() {\n        this.resetInvincibleCounter();\n        this.setGameState(this.GAME_STATE.MENU);\n        this.playPlayerExplosionAnimation();\n        this.player.getComponent(cc.RigidBody).enabledContactListener = false;\n        this.isAlive = false;\n        this.coinScore = 0;\n        this.currentAmmo = this.AMMO_PER_BOX;\n        this.endRandomGeneration();\n        this.resetBoundEffectParameters()\n\n        let delay = 0;\n        if (this.time > this.bestTime) {\n            this.bestTime = this.time;\n            let timeout = 500;\n            delay = timeout + 1100;\n            this.menu.getComponent(\"Menu\").highScoreLabel.string = \"High score: \" + this.parseTime(this.bestTime, 2);\n            this.saveLocalHighScore();\n            setTimeout(() => {\n                cc.audioEngine.play(this.highScoreSound, false, 1);\n                // this.newHighScoreLabel.enabled = true;\n                this.newHighScoreLabel.string = \"New high score: \" + this.parseTime(this.bestTime, 2);\n                this.newHighScoreLabel.node.runAction(cc.sequence(cc.fadeIn(0.45),cc.delayTime(0.8), cc.fadeOut(0.45)));\n                \n            }, timeout);\n        }\n\n        // Let animation finish etc..\n        setTimeout(() => {\n            this.node.destroyAllChildren();\n            this.enableStatsLabels(false);\n            this.time = 0;\n            this.setMenuInteractable(true);\n            this.menu.active = true;\n        }, 1200 + delay);\n    }\n\n    resetBoundEffectParameters() {\n        this.isUpperBoundAnimationPlaying = false;\n        this.isLowerBoundAnimationPlaying = false;\n        this.justPlayedLowerBoundSound = false;\n        this.justPlayedUpperBoundSound = false;\n        this.upperBound.opacity = 0;\n        this.lowerBound.opacity = 0;\n    }\n\n    resetInvincibleCounter() {\n        this.invincibleTimer = this.getInvincibleDuration();\n        this.counterLabel.enabled = false;\n    }\n\n    resetInputAcceleration() {\n        this.accLeft = false;\n        this.accRight = false;\n        this.accUp = false;\n        this.accDown = false;\n        this.xAccelerometer = 0;\n        this.yAccelerometer = 0;\n    }\n    \n    hitBound(isUpperBound: boolean) {\n        isUpperBound ? this.isUpperBoundHit = true : this.isLowerBoundHit = true;       \n    }\n\n    checkLocalHighScore() {\n        let localBest = cc.sys.localStorage.getItem(this.BEST_TIME_KEY);\n        if (localBest !== null) {\n            this.bestTime = Number(localBest);\n            this.menu.getComponent(\"Menu\").highScoreLabel.string = \"High score: \" + this.parseTime(this.bestTime, 2);\n        }\n    }\n\n    saveLocalHighScore() {\n        cc.sys.localStorage.setItem(this.BEST_TIME_KEY, this.bestTime);\n    }\n\n    playBoundEffect(isUpperBound: boolean) {\n        if (isUpperBound) {\n            if (!this.justPlayedUpperBoundSound) {\n                this.justPlayedUpperBoundSound = true;\n                this.boundId = cc.audioEngine.play(this.upperBoundSound, false, 1);\n                this.hitBound(isUpperBound);\n                    if (this.isMobileDevice()) {\n                        cc.audioEngine.setFinishCallback(this.boundId,\n                            () => this.yAccelerometer > 0 ? this.justPlayedUpperBoundSound = true : this.justPlayedUpperBoundSound = false);\n                    }\n                    else {\n                        cc.audioEngine.setFinishCallback(this.boundId,\n                            () => this.isAccUp ? this.justPlayedUpperBoundSound = true : this.justPlayedUpperBoundSound = false);\n                    }\n                }\n            }\n            else {\n                if (!this.justPlayedLowerBoundSound) {\n                    this.justPlayedLowerBoundSound = true;\n                    this.boundId = cc.audioEngine.play(this.upperBoundSound, false, 1);\n                    this.hitBound(isUpperBound);\n                    //=============== TODO =============== \n                    if (this.isMobileDevice()) {\n                        cc.audioEngine.setFinishCallback(this.boundId,\n                            () => this.yAccelerometer < 0 ? this.justPlayedLowerBoundSound = true : this.justPlayedLowerBoundSound = false);\n                    }\n                    else {\n                        cc.audioEngine.setFinishCallback(this.boundId,\n                            () => this.isAccDown ? this.justPlayedLowerBoundSound = true : this.justPlayedLowerBoundSound = false);\n                    }\n                }\n            }\n    }\n\n    checkTopBoundAnimation(dt: number) {\n        if (this.isUpperBoundHit) {\n            this.isUpperBoundHit = false;\n            if (!this.isUpperBoundAnimationPlaying) {\n                this.isUpperBoundAnimationPlaying = true;\n            }\n        }\n        else if (this.isUpperBoundAnimationPlaying) {\n            if (this.increaseOpacity && this.upperBound.opacity < 220) {\n                this.upperBound.opacity += 950 * dt;\n            }\n            else if(this.upperBound.opacity > 0) {\n                this.increaseOpacity = false;\n                this.upperBound.opacity -= 950 * dt;\n            }\n            else {\n                this.upperBound.opacity = 0;\n                this.increaseOpacity = true;\n                this.isUpperBoundAnimationPlaying = false;\n            }\n        }\n    }\n\n    checkLowBoundAnimation(dt: number) {\n        if (this.isLowerBoundHit) {\n            this.isLowerBoundHit = false;\n            if (!this.isLowerBoundAnimationPlaying) {\n                this.isLowerBoundAnimationPlaying = true;\n            }\n        }\n        else if (this.isLowerBoundAnimationPlaying) {\n            if (this.increaseOpacity && this.lowerBound.opacity < 220) {\n                this.lowerBound.opacity += 950 * dt;\n            }\n            else if(this.lowerBound.opacity > 0) {\n                this.increaseOpacity = false;\n                this.lowerBound.opacity -= 950 * dt;\n            }\n            else {\n                this.lowerBound.opacity = 0;\n                this.increaseOpacity = true;\n                this.isLowerBoundAnimationPlaying = false;\n            }\n        }\n    }\n\n    enableStatsLabels(isEnabled: boolean) {\n        this.scoreLabel.enabled = isEnabled;\n        this.timeLabel.enabled = isEnabled;\n        this.ammoLabel.enabled = isEnabled;\n    }\n\n    playRockExplosion() {\n        cc.audioEngine.play(this.rockExpSound, false, 0.8);\n    }\n\n    playPlayerExplosionAnimation() {\n        this.player.getComponent(cc.Animation).play(\"Explosion\");\n    }\n\n    generateRandomPos() {\n        let randomX = Math.random() * this.cvs.width / 2;\n        // set sign value\n        randomX *= this.generateRandomSign();\n        return cc.v2(randomX, this.cvs.height * 0.62);\n    }\n\n    generateRandomSign() {\n        return Math.random() <= 0.5 ? -1 : 1;\n    }\n\n    updateCoinScore() {\n        this.coinScore++;\n        this.coinSound.play();\n        if (this.coinScore >= 10) {\n            this.counterLabel.enabled = true;\n            this.invincibleTimer = this.getInvincibleDuration();\n            this.coinScore = 0;\n            this.invincibleParticleObject.startParticleEffect();\n            // If the player get enough coins while already\n            // invincible, just increase the timers, dont have \n            // to start anything.\n            if (!this.playerObject.isInvincible()) {\n                this.playerObject.makeInvincible();\n            }\n        }\n        this.scoreLabel.string = \"Coins: \" + this.coinScore;\n    }\n\n    addAmmo() {\n        this.currentAmmo += this.AMMO_PER_BOX;\n        cc.audioEngine.play(this.ammoPickupSound, false, 0.55);\n        this.ammoLabel.string = \"Ammo: \" + this.currentAmmo;\n    }\n\n    parseTime(toBeParsed: number, decimals: number) {\n        return Number(Math.round(toBeParsed * 100) / 100).toFixed(decimals);\n    }\n\n    // ========== DYNAMICALLY OBJECT CREATORS ==========\n    createPlayer() {\n        this.resetInputAcceleration();\n        this.player = cc.instantiate(this.playerFab);\n        this.node.addChild(this.player);\n        this.playerObject = this.player.getComponent(\"Player\");\n        // Push reference of the game object\n        this.playerObject.game = this;\n        this.invincibleParticleObject = this.player.getChildByName(\"Particles\").getComponent(\"InvincibleEffect\");\n        this.invincibleParticleObject.setDuration(this.INVINCIBLE_DURATION);\n        this.isAlive = true;\n    }\n\n    spawnCoin() {\n        const newCoin = cc.instantiate(this.coin);\n        this.node.addChild(newCoin);\n        newCoin.setPosition(this.generateRandomPos());\n\n        // Leave a reference to the game object.\n        newCoin.getComponent('Coin').game = this;\n    }\n\n    spawnBlueLaser() {\n        if (!this.isAlive) {\n            return;\n        }\n        if (this.currentAmmo <= 0) {\n            cc.audioEngine.play(this.noAmmoSound, false, 0.8);\n            return;\n        }\n        this.currentAmmo--;\n        this.ammoLabel.string = \"Ammo: \" + this.currentAmmo;\n        const newLaser = cc.instantiate(this.playerLaser);\n        newLaser.setPosition(this.player.x, this.player.y + this.player.height * 0.35);\n\n        // Leave a reference to the game object.\n        const laserObject = newLaser.getComponent('LaserBlue');\n        laserObject.game = this;\n\n        const body = newLaser.getComponent(cc.RigidBody);\n        body.linearVelocity = cc.v2(0, 475);\n        this.node.addChild(newLaser);\n        laserObject.playLaserSound();\n    }\n\n    spawnEnemyLaser(xOffset: number, node: cc.Node, velocityVector: cc.Vec2) {\n        const newLaser = cc.instantiate(this.redLaser);\n        // Relative to the current node. So center it.\n        newLaser.setPosition(node.x + xOffset, node.y -node.height / 2);\n        const body = newLaser.getComponent(cc.RigidBody);\n        body.linearVelocity = velocityVector;\n        // Set the bullets parent to the game object \n        // So they survive even if the enemy is killed\n        // Gets destroyed later by its own laser logic\n        this.node.addChild(newLaser);\n        const laserObject = newLaser.getComponent('LaserRed');\n        // Game from the superclass.\n        laserObject.game = this;\n    }\n\n    spawnAsteroid() {\n        const newAsteroid = cc.instantiate(this.asteroid);\n        this.node.addChild(newAsteroid);\n        let pos = this.generateRandomPos();\n        pos.x *= 0.77;\n        newAsteroid.setPosition(pos);\n\n        const body = newAsteroid.getComponent(cc.RigidBody)\n        const yVel = -50 + Math.random() * -220;\n        let xVel = (Math.random() + 1) * 20  * this.generateRandomSign();\n        body.linearVelocity = cc.v2(xVel , yVel);\n        // Leave a reference to the game object.\n        newAsteroid.getComponent('Asteroid').game = this;\n    }\n\n    spawnAmmo() {\n        const newAmmoBox = cc.instantiate(this.playerAmmo);\n        this.node.addChild(newAmmoBox);\n        newAmmoBox.setPosition(this.generateRandomPos());\n        const body = newAmmoBox.getComponent(cc.RigidBody);\n        body.linearVelocity = cc.v2(0, -95);\n        // Leave a reference to the game object.\n        newAmmoBox.getComponent('Ammo').game = this;\n    }\n\n    spawnRandomEnemy() {\n        let newEnemy = null;\n        const random = Math.random();\n        if (random < 0.33) {\n            newEnemy = cc.instantiate(this.smallEnemy);\n            newEnemy.getComponent('EnemySmall').game = this;\n        }\n        else if (random <= 0.67) {\n            newEnemy = cc.instantiate(this.medEnemy);\n            newEnemy.getComponent('EnemyMedium').game = this;\n        }\n        else {\n            newEnemy = cc.instantiate(this.bigEnemy);\n            newEnemy.getComponent('EnemyBig').game = this;\n        }\n\n        this.node.addChild(newEnemy);\n        newEnemy.setPosition(this.generateRandomPos());\n    }\n\n    setupItemAutoGeneration() {\n        this.setCoinScheduler();\n        this.setAsteroidScheduler();\n        this.setAmmoScheduler();\n        this.setEnemyScheduler();\n\n        // Spawn 1 set of each item without delay\n        this.spawnRandomEnemy();\n        this.spawnAmmo();\n        this.spawnAsteroid();\n        this.spawnCoin();\n    }\n\n    endRandomGeneration() {\n        this.scheduler.unschedule(this.spawnCoin, this);\n        this.scheduler.unschedule(this.spawnAsteroid, this);\n        this.scheduler.unschedule(this.spawnAmmo, this);\n        this.scheduler.unschedule(this.spawnRandomEnemy, this);\n    }\n\n    // ========== SCHEDULERS ==========\n    setCoinScheduler() {\n        this.scheduler.schedule(this.spawnCoin, this, this.COIN_SPAWN_RATE, false);\n    }\n\n    setAsteroidScheduler() {\n        this.scheduler.schedule(this.spawnAsteroid, this, this.ASTEROID_SPAWN_RATE, false);\n    }\n\n    setAmmoScheduler() {\n        this.scheduler.schedule(this.spawnAmmo, this, this.AMMO_SPAWN_RATE, false);\n    }\n\n    setEnemyScheduler() {\n        this.scheduler.schedule(this.spawnRandomEnemy, this, this.ENEMY_SPAWN_RATE, false);\n    }\n\n    // ========== INPUT HANDLING ==========\n    onKeyDown(event: cc.Event.EventKeyboard) {\n        \n        if (this.isPlayerAlive()) {\n            switch(event.keyCode) {\n                case cc.macro.KEY.left:\n                    if (!this.playerObject.isTurnLeftAnimationPlaying()) {\n                        this.playerObject.playFlySound();\n                        this.playerObject.setTurnLeftAnimationPlaying(true);\n                        this.playerObject.getShipAnimations().play(\"PlayerLeft\");\n                    }\n                    this.accLeft = true;\n                    break;\n                case cc.macro.KEY.right:\n                if (!this.playerObject.isTurnRightAnimationPlaying()) {\n                    this.playerObject.playFlySound();\n                    this.playerObject.setTurnRightAnimationPlaying(true);\n                    this.playerObject.getShipAnimations().play(\"PlayerRight\");\n                    }\n                    this.accRight = true;\n                    break;\n                case cc.macro.KEY.up:\n                    this.justPlayedLowerBoundSound = false;\n                    this.accUp = true;\n                    break;\n                case cc.macro.KEY.down:\n                    this.justPlayedUpperBoundSound = false;\n                    this.accDown = true;\n                    break;\n                case cc.macro.KEY.space:\n                    break;\n                case cc.macro.KEY.back:\n                    cc.audioEngine.stopAll();\n                    cc.game.end();\n                    break;\n            }\n        }\n    }\n\n    onKeyUp(event: cc.Event.EventKeyboard) {\n        if (this.isPlayerAlive()) {\n            switch(event.keyCode) {\n                case cc.macro.KEY.left:\n                    this.playerObject.setTurnLeftAnimationPlaying(false);\n                    this.playerObject.getShipAnimations().play(\"PlayerNormal\");\n                    this.accLeft = false;\n                    break;\n                case cc.macro.KEY.right:\n                    this.playerObject.setTurnRightAnimationPlaying(false);\n                    this.playerObject.getShipAnimations().play(\"PlayerNormal\");\n                    this.accRight = false;\n                    break;\n                case cc.macro.KEY.up:\n                    this.accUp = false;\n                    break;\n                case cc.macro.KEY.down:\n                    this.accDown = false;\n                    break;\n                case cc.macro.KEY.space:\n                    this.spawnBlueLaser();\n                    break;\n            }\n        }\n    }\n\n    onDeviceMotionEvent(event: any) {\n        this.xAccelerometer = event.acc.x;\n        this.yAccelerometer = event.acc.y;\n        // Normal player holds the device in a tilted state\n        // Adjust the y for better \"feel\"\n\n        this.yAccelerometer += this.ACCELEROMETER_TILT_OFFSET;\n        // Cap it to 1 /  this.MOBILE_ACC_MULTIPLIER angle of the device\n        if (Math.abs(this.xAccelerometer) > (1 / this.MOBILE_ACC_MULTIPLIER)) {\n            this.xAccelerometer = Math.sign(this.xAccelerometer) * (1 / this.MOBILE_ACC_MULTIPLIER);\n\n        }\n        if (Math.abs(this.yAccelerometer) > (1 / this.MOBILE_ACC_MULTIPLIER)) {\n            this.yAccelerometer = Math.sign(this.yAccelerometer) * (1 / this.MOBILE_ACC_MULTIPLIER);\n        }\n        this.xAccelerometer *= this.MOBILE_ACC_MULTIPLIER;\n        this.yAccelerometer *= this.MOBILE_ACC_MULTIPLIER;\n\n        if (this.yAccelerometer < 0) {\n            this.justPlayedUpperBoundSound = false;\n        }\n        if (this.yAccelerometer > 0 ) {\n            this.justPlayedLowerBoundSound = false;\n        }\n    }\n}\n"]}