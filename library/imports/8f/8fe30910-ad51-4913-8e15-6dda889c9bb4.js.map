{"version":3,"sources":["../../../../assets/Script/assets/Script/Coin.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEAkDC;QA/CW,eAAS,GAAW,GAAG,CAAC;QACxB,SAAG,GAAY,IAAI,CAAC;QACpB,gBAAU,GAAW,CAAC,CAAC;QACvB,kBAAY,GAAW,EAAE,CAAC;QAE1B,aAAO,GAAwB,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACzE,UAAI,GAAS,IAAI,CAAC;;IAyCtB,CAAC;IAxCG,wBAAwB;IAExB,qBAAM,GAAN;QACI,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,sBAAsB,GAAG,IAAI,CAAC;QAC3C,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;IAC9C,CAAC;IAED,oBAAK,GAAL;IAEA,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,oEAAoE;QACpE,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACnC,mCAAmC;YAEnC,gDAAgD;YAChD,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAE9B,mDAAmD;YACnD,yDAAyD;YACzD,6EAA6E;YAC7E,8DAA8D;YAC9D,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAC,GAAG,EAAE;gBACtI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE;oBAChF,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;oBAC5B,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;iBACvB;aACJ;YAED,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACvB;SACJ;IAEL,CAAC;IAhDgB,IAAI;QADxB,OAAO;OACa,IAAI,CAiDxB;IAAD,WAAC;CAjDD,AAiDC,CAjDiC,EAAE,CAAC,SAAS,GAiD7C;kBAjDoB,IAAI","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import Game from \"./Game\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Coin extends cc.Component {\n\n    private coinSpeed: number = 125;\n    private cvs: cc.Node = null;\n    private lowerBound: number = 0;\n    private hitboxRadius: number = 12;\n\n    private manager: cc.CollisionManager = cc.director.getCollisionManager();\n    game: Game = null;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.cvs = cc.find(\"Canvas\");\n        this.manager.enabled = true;\n        this.manager.enabledDebugDraw = true;\n        this.manager.enabledDrawBoundingBox = true;\n        this.lowerBound = -this.cvs.height * 0.62;\n    }\n\n    start () {\n\n    }\n\n    update (dt) {\n        // If it has not been destroyed and cocos trying to free its memory.\n        if (cc.isValid(this.node)) {\n            this.node.y -= this.coinSpeed * dt;\n            // Not been picked up by the player\n\n            // if (this.getPlayerDistance() < this.hitbox) {\n            let player = this.game.player;\n\n            // This is an ugly hack for the collision detection\n            // Tried to adjust  parameters until it had a good feel. \n            // Wanted to do oldschool collision before I started using the physics engine\n            // So the Coin objects are NOT hooked up to the physics engine\n            if (this.node.y - this.hitboxRadius / 2 < player.y - player.height / 2 && this.node.y + this.hitboxRadius > player.y - player.height*1.5) {\n                if (this.node.x < player.x + player.width && this.node.x > player.x - player.width) {\n                    this.game.updateCoinScore();\n                    this.node.destroy();\n                }\n            }\n\n            if (this.node.y <= this.lowerBound) {\n                this.node.destroy();\n            }\n        }\n\n    }\n}\n"]}