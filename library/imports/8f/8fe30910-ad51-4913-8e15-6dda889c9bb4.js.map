{"version":3,"sources":["../../../../assets/Script/assets/Script/Coin.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEA4CC;QAzCW,eAAS,GAAW,GAAG,CAAC;QACxB,SAAG,GAAY,IAAI,CAAC;QACpB,gBAAU,GAAW,CAAC,CAAC;QACvB,kBAAY,GAAW,EAAE,CAAC;QAE1B,aAAO,GAAwB,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACzE,UAAI,GAAS,IAAI,CAAC;;IAmCtB,CAAC;IAlCG,wBAAwB;IAExB,qBAAM,GAAN;QACI,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;IAC9C,CAAC;IAED,oBAAK,GAAL;IAEA,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,oEAAoE;QACpE,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACvB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACnC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,mDAAmD;YACnD,yDAAyD;YACzD,6EAA6E;YAC7E,wEAAwE;YACxE,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC;gBAC9D,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,GAAG,EAAE;gBACnG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE;oBAChF,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;oBAC5B,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;iBACvB;aACJ;YAED,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;gBAChC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;aACvB;SACJ;IAEL,CAAC;IA1CgB,IAAI;QADxB,OAAO;OACa,IAAI,CA2CxB;IAAD,WAAC;CA3CD,AA2CC,CA3CiC,EAAE,CAAC,SAAS,GA2C7C;kBA3CoB,IAAI","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import Game from \"./Game\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Coin extends cc.Component {\n\n    private coinSpeed: number = 125;\n    private cvs: cc.Node = null;\n    private lowerBound: number = 0;\n    private hitBoxOffset: number = 15;\n\n    private manager: cc.CollisionManager = cc.director.getCollisionManager();\n    game: Game = null;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.cvs = cc.find(\"Canvas\");\n        this.lowerBound = -this.cvs.height * 0.62;\n    }\n\n    start () {\n\n    }\n\n    update (dt) {\n        // If it has not been destroyed and cocos trying to free its memory.\n        if (cc.isValid(this.node)) {\n            this.node.y -= this.coinSpeed * dt;\n            let player = this.game.player;\n            // This is an ugly hack for the collision detection\n            // Tried to adjust  parameters until it had a good feel. \n            // Wanted to do oldschool collision before I started using the physics engine\n            // So the Coin objects are currently NOT hooked up to the physics engine\n            if (this.game.isPlayerAlive() && this.node.y - this.hitBoxOffset * 2 < player.y - player.height / 2 &&\n                                                 this.node.y + this.hitBoxOffset > player.y - player.height * 1.5) {\n                if (this.node.x < player.x + player.width && this.node.x > player.x - player.width) {\n                    this.game.updateCoinScore();\n                    this.node.destroy();\n                }\n            }\n\n            if (this.node.y <= this.lowerBound) {\n                this.node.destroy();\n            }\n        }\n\n    }\n}\n"]}