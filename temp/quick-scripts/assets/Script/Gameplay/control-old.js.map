{"version":3,"sources":["control-old.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/Gameplay","sourcesContent":["import Game from \"./Game\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PlayerControl extends cc.Component {\n\n    // Keys for acceleration movement\n    private accLeft: boolean = false;\n    private accRight: boolean = false;\n    private accUp: boolean = false;\n    private accDown: boolean = false;\n    private isLeftAnimPlaying: boolean = false;\n    private isRightAnimPlaying: boolean = false;\n\n    // X / Y bounds for the player\n    private leftBound: number = 0;\n    private rightBound: number = 0;\n    private upperBound: number = 0;\n    private lowerBound: number = 0;\n\n    private xSpeed: number = 0;\n    private ySpeed: number = 0;\n\n    private cvs: cc.Node  = null;\n    private animations : cc.Animation = null;\n\n    game : Game = null;\n    // Constants\n    private readonly X_ACCELERATION: number = 3200;\n    private readonly Y_ACCELERATION: number = 2000;\n    private readonly MAX_SPEED: number = 200;\n    private readonly DAMP: number = 0.8;\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.cvs = cc.find(\"Canvas\");\n        this.animations = this.getComponent(cc.Animation);\n        this.leftBound = -this.cvs.width / 2;\n        this.rightBound = this.cvs.width / 2;\n        this.upperBound = 0;\n        this.lowerBound = this.node.height / 2 -this.cvs.height / 2;\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    // start () {\n    // }\n\n    update (dt) {\n        // === X-AXIS ===\n        if (this.accLeft) {\n            this.xSpeed -= this.X_ACCELERATION * dt;\n        } else if (this.accRight) {\n            this.xSpeed += this.X_ACCELERATION * dt;\n        }\n        this.node.x += this.xSpeed * dt;\n        this.xSpeed *= this.DAMP;\n\n        // X-Screen bounds\n        if (this.node.x <= this.leftBound) {\n            this.node.x = this.leftBound;\n        }\n        else if (this.node.x >= this.rightBound) {\n            this.node.x = this.rightBound;\n        }\n\n        // === Y-AXIS ===\n        if (this.accDown) {\n            this.ySpeed -= this.Y_ACCELERATION * dt;\n        } else if (this.accUp) {\n            this.ySpeed += this.Y_ACCELERATION * dt;\n        }\n        // cap the speed\n        // if (Math.abs(this.xSpeed) > this.maxSpeed) {\n        //     console.log(\"MAXLOOOL\");\n        //     this.xSpeed = Math.sign(this.xSpeed);\n        // }\n        this.node.y += this.ySpeed * dt;\n        this.ySpeed *= this.DAMP;\n\n        // Y-Screen bounds\n        if (this.node.y <= this.lowerBound) {\n            this.node.y = this.lowerBound;\n        }\n        else if (this.node.y >= this.upperBound) {\n            this.node.y = this.upperBound;\n        }\n    }\n\n    onKeyDown(event: cc.Event.EventKeyboard) {\n        switch(event.keyCode) {\n            case cc.macro.KEY.left:\n                if (!this.isLeftAnimPlaying) {\n                    this.isLeftAnimPlaying = true;\n                    this.animations.play(\"PlayerLeft\");\n                }\n                this.accLeft = true;\n                break;\n            case cc.macro.KEY.right:\n            if (!this.isRightAnimPlaying) {\n                this.isRightAnimPlaying = true;\n                this.animations.play(\"PlayerRight\");\n                }\n                this.accRight = true;\n                break;\n            case cc.macro.KEY.up:\n                this.accUp = true;\n                break;\n            case cc.macro.KEY.down:\n                this.accDown = true;\n                break;\n            case cc.macro.KEY.space:\n                break;\n        }\n    }\n\n    onKeyUp(event: cc.Event.EventKeyboard) {\n        switch(event.keyCode) {\n            case cc.macro.KEY.left:\n                this.isLeftAnimPlaying = false;\n                this.animations.play(\"PlayerNormal\");\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.right:\n                this.isRightAnimPlaying = false;\n                this.animations.play(\"PlayerNormal\");\n                this.accRight = false;\n                break;\n            case cc.macro.KEY.up:\n                this.accUp = false;\n                break;\n            case cc.macro.KEY.down:\n                this.accDown = false;\n                break;\n            case cc.macro.KEY.space:\n                this.game.spawnBlueLaser();\n                break;\n        }\n    }\n\n    // ============== Animation trigger functions ==============\n    //These gets called after the main animation is finished (left/right animation)\n    // To keep the fire from the engine fired up while in a tilted state. \n    playMaxLeftFrames() {\n        console.log(\"TRIGGEERRR LLULLLL\");\n        this.animations.play(\"PlayerLeftMax\");\n    }\n\n    playMaxRightFrames() {\n        this.animations.play(\"PlayerRightMax\");\n    }\n}\n"]}